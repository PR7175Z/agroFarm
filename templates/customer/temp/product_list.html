{% load static %}
<div class="card m-3 p-3" style="width: 19rem; height:24rem; border:#9e9b9b solid 2px;">
    
    <form action="{% url 'customer:home' %}" method="post">
    {% csrf_token %}
        {% if products.featuredimage %}
        <a href="/product-detail/{{ products.uid }}" >
            <img src="{{products.featuredimage}}" class="card-img-top" alt="{{ products.name }}" style="border:#d7dbe0 solid 2px; height: 10rem; object-fit: scale-down;">
        </a>
        
        {% else %}
        <a href="/product-detail/{{ products.uid }}" >
            <img src="{% static "images/default.png" %}" class="card-img-top" alt="{{ products.name }}" style="border:#d7dbe0 solid 2px; height: 10rem; object-fit: scale-down;">
        </a>

        {% endif %}
        <div class="card-body">
            <a class="product-list-link" href="/product-detail/{{ products.uid }}" >
                <h4 class="card-title">{{ products.name }}</h4>
            </a>
            <div class='container'>
                <div class='row'>
                    {{ category.name }}
                </div>
                <div class='row'>
                    <div class='col-8 p-0 m-0'>
                        <h5>Rs. {{ products.rate }}</h5>
                    </div>
                    <div class='col-4' hidden>
                        Sale
                    </div>
                </div>
                <div class='row'>
                    <h6 style='text-justify'>
                        <strong>Ratings: </strong>{{products.review_average}}
                    </h6>
                </div>
                <div class='row' hidden>
                    {% if products.is_available %}
                        <h6>In stock</h6>
                    {% else %}
                        <h6>Out of Stock</h6>
                    {% endif %}
                </div>
                <div class='row'>
                    <!-- Rating can be added if available -->
                    {{ review.rating }}
                </div>
            </div>
            <div class="container px-0 mx-1">
                
                <div class='row'>
                    <div class='col-5 px-0 mx-1'>
                            <input type="hidden" name='uid' value='{{product.uid}}'>
                            <button type="submit" name='action' value='buy' class="btn btn-primary w-100">Buy Now</button>
                        
                    </div>
                    <div class='col-4 px-0 mx-1' hidden>
                        <a href="/product-detail/{{ products.uid }}" class="btn btn-danger w-100">View Product</a>
                    </div>
                    <div class='col-6 px-0 mx-1'>
                        <button class="btn btn-success add-to-cart-btn w-100" name = 'action' value='cart' data-product-uid="{{ products.uid }}">Add to Cart</button>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>

<!-- Success Message (Initially hidden) -->
<div id="success-message" style="display:none;" hidden></div>
